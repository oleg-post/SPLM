Настройка стартовой страницы
=================

URL стартовой страницы можно указать двумя способами:
    *   с помощью изменения настроек в административном интерфейсе
    *   описать URL в  dublin.ttl любого модуля.

Для указания URL стартовой страницы с помощью настроек административного интерфейса требуется:
    *	авторизоваться на портале учетной записью администратора портала (произойдет автоматическое перенаправление на страницу административного интерфейса портала);
    *	перейти в раздел “Конфигуратор”;
    *	выбрать в левом навигационном блоке пункт “Основная конфигурация”;
    *	изменить настройку “mainpage” в секции “Info”, указав действующий URL портала.

Для указания URL стартовой страницы с помощью описания модуля – dublin.ttl, требуется выполнить:
    *	Добавить запись с объектом URL обрабатываемым данным модулем;
    *	Добавить запись для данного объекта URL с указанием имени метода зарегистрированного, как обработчик, в модуле Blueprint приложения. Имя метода требуется расширить именем модуля Blueprint, если имя модуля отличается имени директории, где распологается dublin.ttl модуля, в качестве префикса к имени метода и разделенного точкой. Примеры имени метода:
        *	``web_url_handler`` - в случае совпадения имени папки и названия модуля Blueprint;
        *	``test_mod.web_url_handler`` в случае НЕ совпадения;
    *	Добавить запись, указывающую что модуль имеет стартовый URL с помощью отношения hasStartURL;
    *	Добавить запись, указывающую что URL является активным с помощью отношения splm:isActive  со значением  xsd:true.

Пример указания URL в качестве стартовой страницы с помощью описания модуля dublin.ttl::

    <http://splm.portal.web/osplm#test_mod> osplm:hasStartURL data:test_mod_url_1 .

    data: test_mod_url_1 osplm:isActive xsd:false ;
        rdfs:label "web_url_handler"^^<http://www.w3.org/2001/XMLSchema#string> .


Правила определения стартовой страницы:

Приоритет отдается способу задания стартовой страницы через настройки. Такое решение обусловлено возможностью производить изменение на удаленном сервере через вэб интерфейс. Но существует вероятность ошибки – указать не существующий URL.

Если существует множетво модулей и для каждого существует URL, указанный в качестве стартовой страницы с флагом ``splm:isActive``  со значением  ``xsd:true``, то выбор будет сделан случайным образом. По факту в такой ситуации выбор зависит от запроса к описанию всех модулей – первый из списка результатов будет выбран в качестве стартового URL.

Если существует множетво модулей и для каждого существует URL, указанный в качестве стартовой страницы с флагом ``splm:isActive``  со значением  ``xsd:false``, то стартовый URL будет определяться настройками.

По умолчаю, за отображение главной страницы отвечает метод portal_root_view, описанный в файле views.py  в корне проекта. Так как данный метод отвечает за отображение “корня” портала, т.е. обрабатывает запрос по URL - “/”, соответственно изменив тело данного метода можно изменить алгоритм выбора стартовой страницы.

По умолчанию шаблоном стартовой страницы является шаблон index.html, разсположенный в директории шаблонов темы или в директории шаблонов проекта. Имя данного шаблона можно получить с помощью функции API  проекта get_app_root_tpl.

