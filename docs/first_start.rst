.. highlight:: shell

============
Первый запуск приложения
============

Настройка портала
------------
После запуска приложения по адресу http://127.0.0.1:5001/portal и ввода логина и пароля откроется раздел "Настройки портала"

Выполним настройки портала на примере тестовых данных, расположенных в папке "test_data".

.. image:: screenshot_6.png
  :width: 90 %
  :align: center

1. Шаг
`````````````

Загрузите отнтологию через раздел "Онтологии":

.. image:: screenshot_7.png
  :width: 60 %
  :align: center
  
Загружаем файл "pizza_onto.ttl"

.. image:: screenshot_8.png
  :width: 40 %
  :align: center

В итоге должно получится так:

.. image:: screenshot_9.png
  :width: 90 %
  :align: center

После загрузки онтологии ее можно посмотреть кликнув кнопку с изображением цепочки.

.. image:: screenshot_10.png
  :width: 90 %
  :align: center

2. Шаг
`````````````

Разверните один из вариантов TripleStore (Apache Jena, Alegrograph, Blazegraph) и загрузите в него данные и онтологию (файлы "pizza_onto.ttl" и "pizza_data.ttl"):

https://jena.apache.org

https://franz.com

https://blazegraph.com

Для развертывания выбранного хранилища триплетов используйте соответствующую инструкцию.

Создайте пустой репозиторий

3. Шаг
`````````````

Настройте подключение к TripleStore через "Конфигуратор" -> "Хранилище".

.. image:: screenshot_11.png
  :width: 70 %
  :align: center

В секциях "Accounts", "Drivers" и "EndPoints" надо указать соответственно данные для авторизации, тип выбранного хранилища и URL с адресом нужного репозитория (базы)

для Jena тип fuseki

для Alegrograph тип agraph

для Blazegraph тип blazegraph

.. image:: screenshot_12.png
  :width: 50 %
  :align: center

4. Шаг
`````````````

Загрузите картинки через раздел "Управление файлами":

.. image:: screenshot_13.png
  :width: 70 %
  :align: center

создайте папку с именем "images"

.. image:: screenshot_14.png
  :width: 30 %
  :align: center

выберите созданную папку, кликнув по ней мышью и загрузите в нее файлы с картинками. Должно получится так:

.. image:: screenshot_15.png
  :width: 70 %
  :align: center
  
5. Шаг
`````````````

Настройте пользовательское меню через раздел "Навигация":

В этом разделе можно настроить разные меню, см рис.

.. image:: screenshot_16.png
  :width: 70 %
  :align: center

Настроим блок верхней навигации, выбрав кнопку с шестеренкой:

.. image:: screenshot_17.png
  :width: 70 %
  :align: center

Далее, по кнопке выбрать будет доступен перечень ссылок, которые были сформированы на основании описания модуля в файле "dublin.ttl".
Выбираем пункт "Стартовая страница". Далее "Назначить"

.. image:: screenshot_18.png
  :width: 40 %
  :align: center

Должно получится так:

.. image:: screenshot_19.png
  :width: 70 %
  :align: center

Сохраняем.

Далее, по аналогии, настраиваем блок "Разделы портала"

.. image:: screenshot_20.png
  :width: 70 %
  :align: center

Должно получиться так:

.. image:: screenshot_21.png
  :width: 70 %
  :align: center

6. Шаг
`````````````

Настройте нужные роли через раздел "Роли пользователей":

Добавляем роль с именем "user". Должно получиться так:

.. image:: screenshot_22.png
  :width: 70 %
  :align: center

Если в описании модуля (файл dublin.ttl) указы роли, то при настройке они будут выданы в качестве подсказки.

7. Шаг
`````````````

Настройте пользователей через одноименный раздел:

Добавляем пользователя и назначаем ему ранее созданную роль:

.. image:: screenshot_23.png
  :width: 40 %
  :align: center

В итоге дожно получиться так:

.. image:: screenshot_24.png
  :width: 70 %
  :align: center
  
Настройка закончена.
------------

Теперь у администратора в "Верхнем меню" появилась ссылка "Стартовая страница" и можно перейти по ней в навигацию по данным,
или выйти из портала и зайти от имени только что созданного пользователя.

Если все выполнено правильно, то должна появится следующая страничка.

.. image:: screenshot_25.png
  :width: 90 %
  :align: center
